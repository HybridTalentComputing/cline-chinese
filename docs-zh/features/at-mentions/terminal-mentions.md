---
title: "终端引用"
sidebarTitle: "终端引用"
---

终端引用让你可以将终端输出直接带入与 Cline 的对话中。只需输入 `@terminal`，Cline 就可以看到来自终端的最近输出。

当你在聊天中输入 `@` 时，从菜单中选择"终端"或直接输入 `@terminal`。Cline 将立即看到来自活动终端的最近输出，包括错误消息、构建日志或命令结果。

当我处理构建错误、测试失败或调试输出时，我一直使用终端引用。与其试图复制和粘贴终端输出（这经常丢失格式），不如直接询问：

```
运行我的测试时出现此错误：@terminal

是什么导致了这个以及我该如何修复？
```

这给了 Cline 完整的终端输出，保持所有格式不变。然后 Cline 可以分析错误消息、堆栈跟踪和周围上下文，以提供更准确的帮助。

当与文件引用结合时，终端引用特别强大。当我调试失败的 API 调用时，我会同时引用两者：

```
调用我的 API 时出现此错误：@terminal

这是我的 API 客户端代码：@/src/api/client.js
还有端点实现：@/src/server/routes/users.js

我做错了什么？
```

这种方法给了 Cline 它需要的一切 - 确切错误输出、客户端代码和服务器实现 - 所有这些都不需要我手动复制任何东西。

下次你遇到命令输出或构建错误的问题时，尝试使用 `@terminal` 而不是复制输出。你会获得更准确的帮助，因为 Cline 可以看到具有正确格式的完整终端上下文。

## 底层工作原理

当你在消息中使用终端引用时，幕后发生的事情如下：

1. 当你发送消息时，Cline 检测文本中的 `@terminal` 模式
2. 扩展调用 `getLatestTerminalOutput()`，该函数访问 VSCode 的终端 API
3. 它从活动终端捕获最近的输出缓冲区
4. 终端输出以结构化格式附加到你的消息中：

    ```
    <terminal_output>
    $ npm run test
    > project@1.0.0 test
    > jest

    FAIL src/components/__tests__/Button.test.js
    ● Button component › renders correctly

    [保留格式的完整终端输出]
    </terminal_output>
    ```

5. 此增强消息及其嵌入的终端输出被发送到 AI
6. AI 现在"看到"完整的终端输出，保持所有格式不变

每当你使用终端引用时，这个过程自动发生，向 AI 提供对命令结果、错误消息和其他终端输出的访问，而无需你手动复制它。

## 终端问题故障排除

如果你遇到终端引用或一般终端集成的问题（例如"Shell 集成不可用"或命令未显示输出），请参阅我们的综合[终端集成故障排除指南](/troubleshooting/terminal-integration-guide)。

常见问题包括：

-   终端引用未捕获输出
-   Cline 聊天中的"Shell 集成不可用"消息
-   命令正在执行但输出对 Cline 不可见
-   终端集成工作不一致

故障排除指南提供特定于平台的解决方案和详细的配置步骤来解决这些问题。
