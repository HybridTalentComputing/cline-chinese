---
title: "自动批准"
sidebarTitle: "自动批准"
description: "让 Cline 在不需要每次都请求批准的情况下执行特定操作。"
---

自动批准让你决定 Cline 可以在不每次都提示你的情况下执行哪些操作。它在常规工作中让你免于批准弹出窗口，同时仍然让你对高风险操作保持严格控制。

如果你发现自己反复为相同的安全操作点击批准，自动批准是解决此问题的设置。目标是在不失去在重要时审查更改能力的情况下，减少中断。

<Frame>
	<video
		style={{ width: "100%" }}
		src="https://storage.googleapis.com/cline_public_images/autoapprove.mp4"
		autoPlay
		controls
		playsInline
	/>
</Frame>

## 工作原理

自动批准是按工具调用评估的。当 Cline 即将读取文件、编辑文件、运行命令或使用浏览器时，Cline 会检查该类别的自动批准设置。

在实践中，有几个细节很重要：

- **工作区 vs 工作区外**："读取所有文件"和"编辑所有文件"仅扩展基础切换开关。如果基础切换关闭，"所有文件"选项不起作用。

- **终端命令**：Cline 将终端命令视为安全或需要批准。"执行安全命令"涵盖第一类。"执行所有命令"将此扩展到标记为需要批准的命令。

- **通知**：如果启用，当需要批准时，以及当自动批准的终端命令运行了 30 秒可能需要注意时，Cline 会发送操作系统级别的通知。

<Note>
	[YOLO 模式](/features/yolo-mode) 会绕过这些细粒度的批准。
</Note>

## 权限

这些标签与你在自动批准菜单中看到的内容相匹配。

| 设置 | 它允许什么 | 备注 |
|--------|----------------|------|
| 读取项目文件 | 在工作区中读取文件、列出文件、搜索 | 大多数任务的不错默认设置 |
| 读取所有文件 | 在工作区外读取文件 | 需要"读取项目文件" |
| 编辑项目文件 | 在工作区中创建和编辑文件 | 考虑使用检查点 |
| 编辑所有文件 | 在工作区外编辑文件 | 需要"编辑项目文件" |
| 执行安全命令 | 运行标记为安全的终端命令 | 仍可能运行很长时间 |
| 执行所有命令 | 运行标记为需要批准的命令 | 需要"执行安全命令" |
| 使用浏览器 | 允许使用浏览器工具进行 Web 获取和搜索 | 可能适用代理问题 |
| 使用 MCP 服务器 | 使用 MCP 工具和访问 MCP 资源 | 某些服务器也有每工具自动批准 |
| 启用通知 | 通知你关于长时间运行的自动批准命令 | 对终端工作有帮助 |

<Warning>
	"读取所有文件"和"编辑所有文件"只有在启用其基础切换开关时才有用。它们扩展工作区外部的访问权限。
</Warning>

<Card title="网络和代理" icon="globe" href="/troubleshooting/networking-and-proxies">
	如果基于浏览器的工具在企业网络中失败，此页面涵盖常见修复。
</Card>

## 安全 vs 需要批准的命令示例

Cline 不使用固定的安全或非安全命令允许列表。模型根据命令及其参数，使用 `requires_approval` 标志标记每个命令，自动批准使用该标志。

这些是示例，而非保证。

### 通常被视为安全

| 示例 | 为什么通常安全 |
|--------|----------------|
| `npm run build` | 构建输出，无直接文件删除 |
| `npm test` | 运行测试 |
| `git status` | 只读 |
| `ls -la` | 只读 |
| `cat package.json` | 只读 |

### 通常需要批准

| 示例 | 为什么通常需要批准 |
|--------|-------------------|
| `npm install <pkg>` | 修改依赖项和锁文件 |
| `rm -rf <path>` | 删除文件 |
| `mv <a> <b>` | 移动文件（可能覆盖） |
| `sed -i ...` | 原地文件编辑 |
| `curl https://...` | 下载和执行远程代码 |

<Note>
	命令是否被视为安全取决于确切的命令、标志和当前任务。如有疑问，请保持命令自动批准关闭并手动批准命令。
</Note>

## 启用通知

自动批准的操作可以运行一段时间，特别是长时间的终端命令。如果启用通知，Cline 可以在自动批准命令运行一段时间并可能需要注意时通知你。

## 建议

一个好的默认设置是：

- 启用**读取项目文件**
- 保持**编辑项目文件**、**执行安全命令**、**使用浏览器**和**使用 MCP 服务器**关闭，直到你有特定理由启用它们

如果启用编辑，使用[检查点](/features/checkpoints) 以便你可以快速回滚。

如果你在敏感环境中工作（生产凭据、个人文件、企业设备），保持外部文件访问和命令执行锁定，并在进行时手动批准操作。
