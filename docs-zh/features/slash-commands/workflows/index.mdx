---
title: "工作流概述"
sidebarTitle: "概述"
description: "了解什么是 Cline 工作流，为什么它们有用，以及如何构建它们。"
---

Cline 中的工作流是定义一系列步骤的 Markdown 文件，用于引导 Cline 完成重复或复杂的任务。它们是一种直接在编辑器中自动化开发过程的强大方式。

要调用工作流，只需在聊天中输入 `/` 后跟工作流的文件名（例如，`/deploy.md`）。

## 为什么要使用 Cline 工作流？

*   **自动化**：自动化重复性任务，如设置新项目、部署服务或运行特定的测试套件。
*   **一致性**：确保每次都以相同的方式执行任务，减少错误。
*   **减少认知负荷**：不要浪费精力记住复杂的命令序列或步骤。
*   **上下文相关**：工作流在项目上下文中运行，因此 Cline 可以访问你的文件并使用其工具与它们交互。

## 它们如何工作

工作流文件是带有 `.md` 扩展名的标准 Markdown 文件。Cline 读取此文件并逐步解释指令。真正的力量来自于 Cline 在这些指令中使用其内置工具和其他能力的能力：

*   **Cline 工具**：使用 `read_file`、`write_to_file`、`execute_command` 和 `ask_followup_question` 等工具。
*   **命令行工具**：指示 Cline 使用你机器上安装的任何 CLI 工具（例如，`git`、`gh`、`npm`、`docker`）。
*   **MCP 工具**：引用来自连接的模型上下文协议 (MCP) 服务器的工具。

## 工作流与规则

理解 Cline 工作流和 Cline 规则之间的区别很重要，因为它们服务于不同的目的：

| 功能 | 目的 | 何时使用 |
| :--- | :--- | :--- |
| **Cline 规则** | 定义 Cline *如何*一般性地行为。它们始终处于活动状态（或在上下文中触发）并为你的项目设置"基本规则"。 | 强制执行编码标准、技术栈偏好或项目特定约束（例如，"始终使用 TypeScript"、"从不编辑 `db` 文件夹"）。 |
| **Cline 工作流** | 定义 Cline 应该执行的*什么*特定任务。它们是按需调用的步骤序列，用于自动化过程。 | 自动化重复性任务，如创建组件、运行发布过程或生成每日报告。 |

将**规则**视为 Cline 工作的*环境*，将**工作流**视为你给 Cline 执行的*脚本*。

### 示例：自动化发布

想象你需要为你的库准备一个新版本。

**没有工作流**，你可能必须手动：
1.  打开 `package.json` 并增加版本号。
2.  运行你的测试套件以确保一切正常。
3.  用最新的提交更新 `CHANGELOG.md`。
4.  运行 `git commit -am "v1.0.1"`。
5.  运行 `git tag v1.0.1`。
6.  运行 `git push origin main --tags`。

这很乏味且容易出错。你可能会忘记运行测试或正确格式化变更日志。

**使用 Cline 工作流**，你在 `release.md` 文件中定义这些步骤一次。然后，只需输入：

```bash
/release.md
```

Cline 将一丝不苟地遵循你的指令：更新文件、运行测试和执行 git 命令 — 仅在遇到错误或需要你的输入时才会暂停。

## 工作流存储在哪里？

你可以将工作流存储在两个位置，具体取决于它们是特定于项目还是全局的。

<Tabs>
  <Tab title="项目特定的工作流">
    将特定于单个项目的工作流存储在项目根目录的 `.clinerules/workflows/` 目录中。

    1.  在项目根目录中创建一个 `.clinerules` 文件夹（如果尚不存在）。
        <Note>
          `.clinerules` 目录在某些系统上默认是隐藏的。你可能需要启用**显示隐藏文件**才能看到它。
        </Note>
    2.  在 `.clinerules` 中，创建一个 `workflows` 文件夹。
    3.  在此文件夹中创建你的 Markdown 工作流文件（例如，`deploy.md`）。

    这些工作流仅在你打开此特定项目时可用。
  </Tab>
  <Tab title="全局工作流">
    将你想在所有项目中使用的工作流存储在全局目录中。

    *   **macOS/Linux:** `~/Documents/Cline/Workflows/`
    *   **Windows:** `C:\Users\USERNAME\Documents\Cline\Workflows\`

    直接在此目录中创建你的 Markdown 工作流文件。它们将在你使用 Cline 打开的任何项目中可用。
  </Tab>
</Tabs>

## 管理工作流

你可以直接在扩展中轻松管理工作流。此功能提供统一的界面来处理所有自动化需求，而无需离开编辑器或在文件目录中寻找。它将项目特定规则和全局工作流整合到一个视图中，让你完全控制你的自动化环境。

1.  单击扩展底部的**管理 Cline 规则和工作流**按钮（<Icon icon="scale-balanced" />）。
2.  这将打开一个界面，你可以在其中：
    *   **查看所有可用的工作流**：查看项目特定和全局工作流的综合列表。
    *   **控制自动化**：根据需要为当前任务切换单个工作流的开关。
    *   **创建和编辑**：直接在界面中添加新的工作流或修改现有的工作流。
    *   **清理**：删除你不再需要的工作流。

<Frame caption="管理工作流">
  <img src="https://storage.googleapis.com/cline_public_images/workflow-menu.gif" alt="管理 Cline 规则和工作流界面" />
</Frame>

## 工作流结构示例

这是一个帮助你创建每日变更日志的工作流文件（`daily-changelog.md`）的简单示例。

````markdown daily-changelog.md
# 每日变更日志生成器

此工作流帮助你为你的日常工作创建变更日志。

1.  **检查你最近的 git 提交：**
    我将运行以下命令以查看你今天的提交。
    ```bash
    git log --author="$(git config user.name)" --since="yesterday" --oneline
    ```

2.  **总结你的工作：**
    我将向你展示提交并询问你要添加到 `changelog.md` 文件的更改摘要。

3.  **创建/追加到每日变更日志：**
    我将追加到 `changelog.md` 文件。内容将包括带有当前日期的标题、提交列表和你的摘要。
````

### 工作流分解

此工作流演示了你并不总是需要提供特定的工具调用（如 XML 块）。Cline 足够智能，可以解释你的高级指令。

1.  **步骤 1：检查最近的 git 提交**
    *   我们给 Cline 一个要运行的特定命令。这确保它获得我们想要的确切数据（今天的提交）。
    <Tip>
      在 Cline 显示 git 提交历史后，你可能需要单击**运行时继续**按钮以允许工作流继续。
    </Tip>

2.  **步骤 2：总结你的工作**
    *   我们不是强制使用特定工具，而是简单地告诉 Cline 做什么："请求摘要"。
    *   Cline 知道它需要使用其功能来问你一个问题。

3.  **步骤 3：创建/追加到每日变更日志**
    *   我们描述期望的结果："追加到 `changelog.md` 文件"，并包含特定内容。
    *   Cline 弄清楚如何格式化文件并使用其文件写入工具完成任务。
