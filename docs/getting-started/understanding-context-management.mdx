---
title: "上下文管理"
description: "上下文是充分利用 Cline 的关键"
---

> 💡 **快速参考**
>
> -   上下文 = Cline 了解您项目的信息
> -   上下文窗口 = Cline 一次可以保存多少信息
> -   使用上下文文件维护项目知识
> -   当上下文窗口满时重置

## 理解上下文和上下文窗口

<Frame caption="在无限上下文的世界中，上下文窗口是 Cline 目前可用的内容">
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/image%20(2).png"
		alt="在无限上下文的世界中，上下文窗口是 Cline 目前可用的内容"
	/>
</Frame>

将使用 Cline 想象为与一个彻底、主动的队友协作：

### 上下文如何构建

Cline 以两种方式主动构建上下文：

1. **自动上下文收集（即 Cline 驱动）**
    - 主动读取相关文件
    - 探索项目结构
    - 分析模式和关系
    - 映射依赖关系和导入
    - 提出澄清问题
2. **用户指导的上下文**
    - 分享特定文件
    - 提供文档
    - 回答 Cline 的问题
    - 指导重点领域
    - 分享设计想法和要求

💡 **关键点**：Cline 不是被动的——它主动寻求理解您的项目。您可以让它探索或指导其重点，特别是在[计划](https://docs.cline.bot/features/plan-and-act)模式下。

### 上下文和上下文窗口

将上下文想象为您和 Cline 共享的白板：

-   **上下文**是所有可用信息：
    -   Cline 发现的内容
    -   您分享的内容
    -   您的对话历史
    -   项目要求
    -   之前的决定
-   **上下文窗口**是白板本身的大小：
    -   以令牌为单位测量（1 个令牌 ≈ 3/4 个英语单词）
    -   每个模型都有固定大小：
        -   Claude 3.5 Sonnet：200,000 令牌
        -   DeepSeek：64,000 令牌
    -   当白板满时，Cline 自动总结对话以释放空间
        -   [了解自动上下文总结](/features/automatic-context-summarization)
        -   [Cline 如何在幕后管理上下文](https://cline.bot/blog/understanding-the-new-context-window-progress-bar-in-cline)

⚠️ **重要**：拥有大的上下文窗口（如 Claude 的 200k 令牌）并不意味着您应该完全填满它。就像杂乱的白板一样，太多信息会使专注于重要内容变得困难。

## 理解上下文窗口进度条

Cline 通过进度条提供了一种可视化方式来监控您的上下文窗口使用情况：

<Frame caption="上下文窗口使用的可视化表示">
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/image%20(1)%20(1).png"
		alt="上下文窗口进度条"
	/>
</Frame>

### 读取进度条

-   ↑ 显示输入令牌（您发送给 LLM 的内容）
-   ↓ 显示输出令牌（LLM 生成的内容）
-   进度条可视化您已使用的上下文窗口量
-   总数显示您模型的最大容量（例如，Claude 3.5-Sonnet 为 200k）

### 何时关注进度条

-   在长时间编码会话期间
-   当处理多个文件时
-   在开始复杂任务之前
-   当 Cline 似乎失去上下文时

💡 **提示**：通过[自动上下文总结](/features/automatic-context-summarization)，Cline 现在可以自动处理长对话。当与[焦点链](/features/focus-chain)结合时，您可以处理跨越多个上下文窗口的复杂项目，而不会失去进度。

## 自动上下文管理

Cline 现在包含智能功能来自动管理上下文：

### 自动上下文总结

当您的对话接近上下文窗口限制时，Cline 自动：
- 创建对话的全面总结
- 保留所有基本技术细节和决定
- 无缝继续工作而不中断
- 保持完整的任务连续性

这意味着您可以处理更大的项目，而无需手动管理上下文。[了解更多关于自动上下文总结](/features/automatic-context-summarization)。

### 焦点链集成

当与[焦点链](/features/focus-chain)结合时，Cline 可以：
- 在上下文重置中维护待办事项列表
- 通过多次总结跟踪进度
- 继续处理长期任务而不失去方向

## 使用上下文文件

上下文文件有助于在会话之间维护理解。它们作为专门设计的文档，帮助 AI 助手理解您的项目。

#### 上下文文件的方法

1. **常青项目上下文（即**[**记忆库**](https://docs.cline.bot/prompting/cline-memory-bank)**）**
    - 随项目发展的活文档
    - 随着架构和模式的出现而更新
    - 示例：记忆库模式维护像 `techContext.md` 和 `systemPatterns.md` 这样的文件
    - 适用于长期项目和团队
2. **任务特定上下文（即**[**结构化方法**](https://cline.bot/blog/building-advanced-software-with-cline-a-structured-approach)**）**

    - 为特定实现任务创建
    - 记录要求、约束和决定
    - 示例：

        ```markdown
        # auth-system-implementation.md

        ## 要求

        -   OAuth2 实现
        -   支持 Google 和 GitHub
        -   认证端点的速率限制

        ## 技术决定

        -   使用 Passport.js 进行提供商集成
        -   JWT 用于会话管理
        -   Redis 用于速率限制
        ```

3. **知识转移文档**
    - 切换到计划模式，要求 Cline 将您迄今为止完成的所有内容以及剩余步骤记录在 markdown 文件中。
    - 复制 markdown 文件的内容。
    - 使用该内容作为上下文开始新任务。

#### 有效使用上下文文件

1. **结构和格式**
    - 使用清晰、一致的组织
    - 包含相关示例
    - 链接相关概念
    - 保持信息重点
2. **维护**
    - 在重大更改后更新
    - 版本控制您的上下文文件
    - 删除过时信息
    - 记录关键决定

## 实用技巧

1. **开始新项目**
    - 让 Cline 探索代码库
    - 回答其关于结构和模式的问题
    - 考虑设置基本上下文文件
    - 记录关键设计决定
2. **持续开发**
    - 用重大更改更新上下文文件
    - 分享相关文档
    - 对复杂讨论使用计划模式
    - 在需要时开始新会话
3. **团队项目**
    - 分享通用上下文文件（考虑在项目根目录使用 [.clinerules](https://docs.cline.bot/features/cline-rules) 文件）
    - 记录架构决定
    - 维护一致的模式
    - 保持文档最新

记住：目标是帮助 Cline 在会话之间保持对您项目的一致理解。
