---
title: "连接到远程服务器"
description: "模型上下文协议（MCP）允许 Cline 与提供额外工具和资源以扩展其功能的外部服务器通信。本指南解释了如何通过 MCP 服务器界面添加和连接到远程 MCP 服务器。"
---

## 添加和管理远程 MCP 服务器

### 访问 MCP 服务器界面

要在 Cline 中访问 MCP 服务器界面：

1. 点击 VSCode 侧边栏中的 Cline 图标
2. 打开 Cline 面板右上角的菜单（⋮）
3. 从下拉菜单中选择"MCP 服务器"

### 理解 MCP 服务器界面

MCP 服务器界面分为三个主要选项卡：

-   **市场**：发现并安装预配置的 MCP 服务器（如果启用）
-   **远程服务器**：通过 URL 端点连接到现有的 MCP 服务器
-   **已安装**：管理您连接的 MCP 服务器

### 添加远程 MCP 服务器

"远程服务器"选项卡允许您连接到任何可通过 URL 端点访问的 MCP 服务器：

1. 在 MCP 服务器界面中点击"远程服务器"选项卡
2. 填写所需信息：
    - **服务器名称**：为服务器提供唯一的描述性名称
    - **服务器 URL**：输入 MCP 服务器的完整 URL 端点（例如，`https://example.com/mcp-sse`）
3. 点击"添加服务器"以启动连接
4. Cline 将尝试连接到服务器并显示连接状态

> **注意**：连接到远程服务器时，请确保您信任源，因为 MCP 服务器可以在您的环境中执行代码。

### 远程服务器发现

如果您正在寻找要连接的 MCP 服务器，几个第三方市场提供了具有各种功能的可用服务器目录。

> **警告**：以下第三方市场仅出于信息目的列出。Cline 不认可、验证或对这些市场上列出的任何服务器承担责任。这些服务器是云托管服务，处理您的请求并可能访问您与它们共享的数据。在连接到第三方服务之前，请始终审查隐私政策和使用条款。

#### Composio MCP 集成

[Composio 的 MCP 市场](https://mcp.composio.dev/) 提供对支持模型上下文协议（MCP）的各种第三方服务器的访问。这些服务器公开了 GitHub、Notion、Slack 等服务的 API。每个服务器都包括配置说明和内置身份验证支持（例如 OAuth 或 API 密钥）。要连接，请在市场中找到所需服务并按照那里提供的集成步骤操作。

#### 通过 Smithery 连接

Smithery 是一个第三方 MCP 服务器市场，允许用户发现并连接到各种模型上下文协议（MCP）服务器。如果您使用的是 MCP 兼容客户端（如 Cursor、Claude Desktop 或 Cline），您可以浏览可用服务器并将它们直接集成到您的工作流程中。

要探索可用选项，请访问 Smithery 市场：[https://smithery.ai](https://smithery.ai)

请注意：Smithery 独立维护，与我们的项目没有关联。请自行决定使用。

### 管理已安装的 MCP 服务器

添加后，您的 MCP 服务器将出现在"已安装"选项卡中，您可以在其中：

#### 查看服务器状态

每个服务器显示其当前状态：

-   **绿点**：已连接并准备使用
-   **黄点**：正在连接过程中
-   **红点**：已断开连接或遇到错误

#### 配置服务器设置

点击服务器以展开其设置面板：

1. **工具和资源**：
    - 查看服务器提供的所有可用工具和资源
    - 配置工具的自动批准设置（如果启用）
2. **请求超时**：
    - 设置 Cline 应等待服务器响应多长时间
    - 选项范围从 30 秒到 1 小时
3. **服务器管理**：
    - **重启服务器**：如果服务器无响应则重新连接
    - **删除服务器**：从您的配置中删除服务器

#### 启用/禁用服务器

切换每个服务器旁边的开关以启用或禁用它：

-   **已启用**：Cline 可以使用服务器的工具和资源
-   **已禁用**：服务器保留在您的配置中但不活跃

### 故障排除连接问题

如果服务器连接失败：

1. 将显示错误消息，包含有关失败的详细信息
2. 检查服务器 URL 是否正确以及服务器是否正在运行
3. 使用"重启服务器"按钮尝试重新连接
4. 如果问题持续存在，您可以删除服务器并尝试重新添加

### 高级配置

对于高级用户，Cline 将 MCP 服务器配置存储在可以修改的 JSON 文件中：

1. 在"已安装"选项卡中，点击"配置 MCP 服务器"以访问设置文件
2. 每个服务器的配置遵循此格式：

```json
{
	"mcpServers": {
		"exampleServer": {
			"url": "https://example.com/mcp-sse",
			"disabled": false,
			"autoApprove": ["tool1", "tool2"],
			"timeout": 30
		}
	}
}
```

关键配置选项：

-   **url**：端点 URL（对于远程服务器）
-   **disabled**：服务器当前是否启用（true/false）
-   **autoApprove**：不需要确认的工具名称列表
-   **timeout**：等待服务器响应的最大时间（秒）

对于其他 MCP 设置，点击"高级 MCP 设置"链接以访问 VSCode 设置。

### 使用 MCP 服务器工具

连接后，Cline 可以使用 MCP 服务器提供的工具和资源。当 Cline 建议使用 MCP 工具时：

1. 将出现工具批准提示（除非自动批准）
2. 在批准之前审查工具详细信息和参数
3. 工具将执行并向 Cline 返回结果
